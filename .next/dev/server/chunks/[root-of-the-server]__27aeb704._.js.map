{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/youngjepark/Documents/GitHub/ThangBackend/lib/mongodb.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\n\nif (!process.env.MONGODB_URI) {\n  throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\n}\n\nconst uri = process.env.MONGODB_URI;\nconst options = {\n  maxPoolSize: 10,\n  serverSelectionTimeoutMS: 5000, // Fail after 5 seconds if cannot connect\n  socketTimeoutMS: 45000, // Close sockets after 45 seconds of inactivity\n};\n\nlet client;\nlet clientPromise;\n\nif (process.env.NODE_ENV === \"development\") {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  if (!global._mongoClientPromise) {\n    client = new MongoClient(uri, options);\n    global._mongoClientPromise = client.connect();\n  }\n  clientPromise = global._mongoClientPromise;\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options);\n  clientPromise = client.connect();\n}\n\nexport default clientPromise;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC5B,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,MAAM,UAAU;IACd,aAAa;IACb,0BAA0B;IAC1B,iBAAiB;AACnB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,+DAA+D;IAC/D,6EAA6E;IAC7E,IAAI,CAAC,yDAAO,mBAAmB,EAAE;QAC/B,SAAS,IAAI,2MAAW,CAAC,KAAK;QAC9B,yDAAO,mBAAmB,GAAG,OAAO,OAAO;IAC7C;IACA,gBAAgB,yDAAO,mBAAmB;AAC5C;;uCAMe"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/youngjepark/Documents/GitHub/ThangBackend/pages/api/auth/find-email.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from \"next\";\nimport clientPromise from \"@/lib/mongodb\";\n\nconst DB_NAME = process.env.NEXT_PUBLIC_DB_NAME || \"game\";\n\nexport default async function handler(\n  req: NextApiRequest,\n  res: NextApiResponse\n) {\n  if (req.method !== \"POST\") {\n    return res.status(405).json({ error: \"Method not allowed\" });\n  }\n\n  try {\n    const { username } = req.body;\n    if (!username) {\n      return res.status(400).json({ error: \"Username is required\" });\n    }\n\n    const client = await clientPromise;\n    const db = client.db(DB_NAME);\n    const users = db.collection(\"users\");\n\n    // Case insensitive search\n    const user = await users.findOne({\n      username: { $regex: new RegExp(`^${username}$`, \"i\") },\n    });\n\n    if (!user) {\n      return res.status(404).json({ error: \"User not found\" });\n    }\n\n    if (!user.email) {\n      return res\n        .status(404)\n        .json({ error: \"No email associated with this user\" });\n    }\n\n    // Mask email (e.g., \"j***@gmail.com\")\n    const [local, domain] = user.email.split(\"@\");\n    const maskedLocal =\n      local.length > 2\n        ? local[0] + \"***\" + local[local.length - 1]\n        : local + \"***\";\n    const maskedEmail = `${maskedLocal}@${domain}`;\n\n    return res.status(200).json({ email: maskedEmail });\n  } catch (error: any) {\n    console.error(\"[Find Email] Error:\", error);\n    return res.status(500).json({ error: \"Internal Server Error\" });\n  }\n}\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAEpC,eAAe,QAC5B,GAAmB,EACnB,GAAoB;IAEpB,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;QAC7B,IAAI,CAAC,UAAU;YACb,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAuB;QAC9D;QAEA,MAAM,SAAS,MAAM,yJAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,QAAQ,GAAG,UAAU,CAAC;QAE5B,0BAA0B;QAC1B,MAAM,OAAO,MAAM,MAAM,OAAO,CAAC;YAC/B,UAAU;gBAAE,QAAQ,IAAI,OAAO,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE;YAAK;QACvD;QAEA,IAAI,CAAC,MAAM;YACT,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAiB;QACxD;QAEA,IAAI,CAAC,KAAK,KAAK,EAAE;YACf,OAAO,IACJ,MAAM,CAAC,KACP,IAAI,CAAC;gBAAE,OAAO;YAAqC;QACxD;QAEA,sCAAsC;QACtC,MAAM,CAAC,OAAO,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,CAAC;QACzC,MAAM,cACJ,MAAM,MAAM,GAAG,IACX,KAAK,CAAC,EAAE,GAAG,QAAQ,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,GAC1C,QAAQ;QACd,MAAM,cAAc,GAAG,YAAY,CAAC,EAAE,QAAQ;QAE9C,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAY;IACnD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAwB;IAC/D;AACF"}}]
}